# Documentation: `third_party/generate-cpuinfo-wrappers.py`

## File Metadata

- **Path**: `third_party/generate-cpuinfo-wrappers.py`
- **Size**: 3,113 bytes (3.04 KB)
- **Type**: Python Source Code
- **Extension**: `.py`

## File Purpose

Can be **executed as a standalone script**.

## Original Source

```python
#!/usr/bin/env python3

from __future__ import print_function
import os


CPUINFO_SOURCES = {
    None: [
        "init.c",
        "api.c",
        "cache.c",
        "log.c",
    ],
    "defined(__linux__)": [
        "linux/multiline.c",
        "linux/cpulist.c",
        "linux/mockfile.c",
        "linux/smallfile.c",
        "linux/processors.c",
    ],
    "defined(__MACH__) && defined(__APPLE__)": [
        "mach/topology.c",
    ],
    "defined(__i386__) || defined(__i686__) || defined(__x86_64__) || defined(_WIN32)": [
        "x86/cache/init.c",
        "x86/cache/deterministic.c",
        "x86/cache/descriptor.c",
        "x86/info.c",
        "x86/mockcpuid.c",
        "x86/isa.c",
        "x86/topology.c",
        "x86/name.c",
        "x86/init.c",
        "x86/uarch.c",
        "x86/vendor.c",
    ],
    "(defined(__i386__) || defined(__i686__) || defined(__x86_64__)) && defined(__linux__)": [
        "x86/linux/init.c",
        "x86/linux/cpuinfo.c",
    ],
    "(defined(__i386__) || defined(__i686__) || defined(__x86_64__)) && defined(__MACH__) && defined(__APPLE__)": [
        "x86/mach/init.c",
    ],
    "defined(_WIN32)": [
        "x86/windows/init.c",
    ],
    "(defined(__arm__) || defined(__aarch64__)) && defined(__linux__)": [
        "arm/linux/cpuinfo.c",
        "arm/linux/hwcap.c",
        "arm/linux/init.c",
        "arm/linux/clusters.c",
        "arm/linux/midr.c",
        "arm/linux/chipset.c",
        "arm/tlb.c",
        "arm/uarch.c",
        "arm/cache.c",
    ],
    "defined(__arm__) && defined(__linux__)": [
        "arm/linux/aarch32-isa.c",
    ],
    "defined(__aarch64__) && defined(__linux__)": [
        "arm/linux/aarch64-isa.c",
    ],
    "(defined(__arm__) || defined(__aarch64__)) && defined(__ANDROID__)": [
        "arm/android/properties.c",
    ],
    "(defined(__arm__) || defined(__aarch64__)) && defined(TARGET_OS_IPHONE) && TARGET_OS_IPHONE": [
        "arm/mach/init.c",
    ],
}


if __name__ == "__main__":
    for condition, filenames in CPUINFO_SOURCES.items():
        for filename in filenames:
            filepath = os.path.join("cpuinfo/wrappers", filename)
            if not os.path.exists(os.path.dirname(filepath)):
                print(filepath)
                os.makedirs(os.path.dirname(filepath))
            with open(filepath, "w") as wrapper:
                print("/* Auto-generated by generate-wrappers.py script. Do not modify */", file=wrapper)
                print(file=wrapper)
                print("#ifdef __APPLE__", file=wrapper)
                print("\t#include <TargetConditionals.h>", file=wrapper)
                print("#endif /* __APPLE__ */", file=wrapper)
                print(file=wrapper)

                if not condition:
                    print(f"#include <{filename}>", file=wrapper)
                else:
                    # Include source file only if condition is satisfied
                    print(f"#if {condition}", file=wrapper)
                    print(f"#include <{filename}>", file=wrapper)
                    print(f"#endif /* {condition} */", file=wrapper)

```



## High-Level Overview


This Python file contains 0 class(es) and 1 function(s).

## Detailed Analysis

### Code Structure

**Key imports**: print_function, os


*For complete code details, see the Original Source section above.*


## Architecture & Design

### Role in PyTorch Architecture

This file is located in `third_party`, which is part of the PyTorch project infrastructure.



## Dependencies

### Import Dependencies

This file imports:

- `__future__`: print_function
- `os`


## Code Patterns & Idioms

### Common Patterns

*No specific patterns automatically detected.*


## Performance Considerations

### Performance Notes

- Implements or uses **caching** mechanisms.

*Detailed performance analysis requires profiling and benchmarking.*


## Security & Safety

### Security Considerations

- No obvious security concerns detected in automated analysis.

*Manual security review is recommended for production code.*


## Testing & Usage

### Testing

Test files for this module may be located in the `test/` directory.

### Usage Examples

*See the source code and related test files for usage examples.*


## Related Files

### Related Files

Files in the same folder (`third_party`):

- [`glog.buck.bzl_docs.md`](./glog.buck.bzl_docs.md)
- [`generate-xnnpack-wrappers.py_docs.md`](./generate-xnnpack-wrappers.py_docs.md)
- [`xpu.txt_docs.md`](./xpu.txt_docs.md)
- [`kineto.buck.bzl_docs.md`](./kineto.buck.bzl_docs.md)
- [`xnnpack.buck.bzl_docs.md`](./xnnpack.buck.bzl_docs.md)
- [`xnnpack_wrapper_defs.bzl_docs.md`](./xnnpack_wrapper_defs.bzl_docs.md)
- [`eigen_pin.txt_docs.md`](./eigen_pin.txt_docs.md)
- [`LICENSES_BUNDLED.txt_docs.md`](./LICENSES_BUNDLED.txt_docs.md)
- [`sleef.bzl_docs.md`](./sleef.bzl_docs.md)


## Cross-References

- **File Documentation**: `generate-cpuinfo-wrappers.py_docs.md`
- **Keyword Index**: `generate-cpuinfo-wrappers.py_kw.md`
- **Folder Index**: `index.md`
- **Folder Documentation**: `doc.md`

---

*Generated by PyTorch Repository Documentation System*
