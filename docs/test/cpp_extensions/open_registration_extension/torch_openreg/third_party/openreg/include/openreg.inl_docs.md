# Documentation: openreg.inl

## File Metadata
- **Path**: `test/cpp_extensions/open_registration_extension/torch_openreg/third_party/openreg/include/openreg.inl`
- **Size**: 1166 bytes
- **Lines**: 42
- **Extension**: .inl
- **Type**: Regular file

## Original Source

```inl
#ifndef OPENREG_H
#error "Don`t include openreg.inl directly, include openreg.h instead."
#endif

#include <functional>
#include <tuple>
#include <utility>

namespace openreg {
OPENREG_EXPORT orError_t
addTaskToStream(orStream* stream, std::function<void()> task);
}

template <typename Func, typename... Args>
OPENREG_EXPORT inline orError_t orLaunchKernel(
    orStream* stream,
    Func&& kernel_func,
    Args&&... args) {
  if (!stream) {
    return orErrorUnknown;
  }

/*
 * Some tests in PyTorch still use C++11, so we use conditional macro to
 * select different approaches for different C++ version.
 *
 * Std::apply is only supported in C++17, so for C++11/14, std::bind is
 * a more appropriate approach, but the former has better performance.
 */
#if __cplusplus >= 201703L
  auto task = [func = std::forward<Func>(kernel_func),
               args_tuple =
                   std::make_tuple(std::forward<Args>(args)...)]() mutable {
    std::apply(func, std::move(args_tuple));
  };
#else
  auto task =
      std::bind(std::forward<Func>(kernel_func), std::forward<Args>(args)...);
#endif

  return openreg::addTaskToStream(stream, std::move(task));
}

```

## High-Level Overview

This file is part of the PyTorch repository. It is a source or configuration file.

## Detailed Walkthrough


## Key Components

The file contains 126 words across 42 lines of code/text.

## Usage & Examples

This file is part of the larger PyTorch codebase. For usage examples, refer to related test files and documentation.

## Performance & Security Notes

- File size: 1166 bytes
- Complexity: Standard

## Related Files

See the folder index for related files in the same directory.

## Testing

Refer to the PyTorch test suite for test coverage of this file.

---
*Generated by Repo Book Generator v1.0*
