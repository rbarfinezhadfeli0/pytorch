# Documentation: test_events.cpp

## File Metadata
- **Path**: `test/cpp/monitor/test_events.cpp`
- **Size**: 841 bytes
- **Lines**: 38
- **Extension**: .cpp
- **Type**: Regular file

## Original Source

```cpp
#include <gtest/gtest.h>

#include <torch/csrc/monitor/events.h>

using namespace torch::monitor;

struct AggregatingEventHandler : public EventHandler {
  std::vector<Event> events;

  void handle(const Event& e) override {
    events.emplace_back(e);
  }
};

TEST(EventsTest, EventHandler) {
  Event e;
  e.name = "test";
  e.timestamp = std::chrono::system_clock::now();
  e.data["string"] = "asdf";
  e.data["double"] = 1234.5678;
  e.data["int"] = 1234L;
  e.data["bool"] = true;

  // log to nothing
  logEvent(e);

  auto handler = std::make_shared<AggregatingEventHandler>();
  registerEventHandler(handler);

  logEvent(e);
  ASSERT_EQ(handler->events.size(), 1);
  ASSERT_EQ(e, handler->events.at(0));

  unregisterEventHandler(handler);
  logEvent(e);
  // handler unregister, didn't log
  ASSERT_EQ(handler->events.size(), 1);
}

```

## High-Level Overview

This file is part of the PyTorch repository. It is a C++/CUDA source/header file that may contain implementations, declarations, or kernel code.

## Detailed Walkthrough

### Structures
This file defines 1 struct(s): AggregatingEventHandler


## Key Components

The file contains 72 words across 38 lines of code/text.

## Usage & Examples

This file is part of the larger PyTorch codebase. For usage examples, refer to related test files and documentation.

## Performance & Security Notes

- File size: 841 bytes
- Complexity: Standard

## Related Files

See the folder index for related files in the same directory.

## Testing

Refer to the PyTorch test suite for test coverage of this file.

---
*Generated by Repo Book Generator v1.0*
