# Documentation: test_upload_gate.py

## File Metadata
- **Path**: `tools/test/test_upload_gate.py`
- **Size**: 979 bytes
- **Lines**: 28
- **Extension**: .py
- **Type**: Regular file

## Original Source

```py
import unittest

from tools.stats.upload_test_stats import should_upload_full_test_run


class TestUploadGate(unittest.TestCase):
    def test_main_branch_on_pytorch_repo(self) -> None:
        self.assertTrue(should_upload_full_test_run("main", "pytorch/pytorch"))

    def test_trunk_tag_valid_sha_on_pytorch_repo(self) -> None:
        sha = "a" * 40
        self.assertTrue(should_upload_full_test_run(f"trunk/{sha}", "pytorch/pytorch"))

    def test_trunk_tag_invalid_sha_on_pytorch_repo(self) -> None:
        # Not 40 hex chars
        self.assertFalse(should_upload_full_test_run("trunk/12345", "pytorch/pytorch"))

    def test_non_main_branch_on_pytorch_repo(self) -> None:
        self.assertFalse(
            should_upload_full_test_run("feature-branch", "pytorch/pytorch")
        )

    def test_main_branch_on_fork_repo(self) -> None:
        self.assertFalse(should_upload_full_test_run("main", "someone/fork"))


if __name__ == "__main__":
    unittest.main()

```

## High-Level Overview

This file is part of the PyTorch repository. It is a Python source file that may contain classes, functions, and module-level code.

## Detailed Walkthrough

### Classes
This file defines 1 class(es): TestUploadGate

### Functions
This file defines 5 function(s): test_main_branch_on_pytorch_repo, test_trunk_tag_valid_sha_on_pytorch_repo, test_trunk_tag_invalid_sha_on_pytorch_repo, test_non_main_branch_on_pytorch_repo, test_main_branch_on_fork_repo


## Key Components

The file contains 55 words across 28 lines of code/text.

## Usage & Examples

This file is part of the larger PyTorch codebase. For usage examples, refer to related test files and documentation.

## Performance & Security Notes

- File size: 979 bytes
- Complexity: Standard

## Related Files

See the folder index for related files in the same directory.

## Testing

Refer to the PyTorch test suite for test coverage of this file.

---
*Generated by Repo Book Generator v1.0*
