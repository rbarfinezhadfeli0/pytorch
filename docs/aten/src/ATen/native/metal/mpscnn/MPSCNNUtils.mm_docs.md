# Documentation: MPSCNNUtils.mm

## File Metadata
- **Path**: `aten/src/ATen/native/metal/mpscnn/MPSCNNUtils.mm`
- **Size**: 1206 bytes
- **Lines**: 35
- **Extension**: .mm
- **Type**: Regular file

## Original Source

```mm
#import <ATen/native/metal/mpscnn/MPSCNNUtils.h>

namespace at::native::metal::mpscnn {

static auto divRoundUp(uint x, uint y) -> uint {
  return (x + y - 1) / y;
}

LaunchParams spatialPointwiseKernelLaunchParams(
    id<MTLComputePipelineState> pipeline,
    MPSImage* im) {
  return spatialPointwiseKernelLaunchParams(
      pipeline, im.numberOfImages, im.featureChannels, im.height, im.width);
}

LaunchParams spatialPointwiseKernelLaunchParams(
    id<MTLComputePipelineState> pipeline,
    NSUInteger numberOfImages,
    NSUInteger featureChannels,
    NSUInteger height,
    NSUInteger width) {
  const auto threadsPerThreadgroup = MTLSizeMake(
      8 /* threadExecutionWidth */,
      4 /* maxThreadsPerThreadgroup / threadExecutionWidth */,
      1);
  const auto threadgroupsPerGrid = MTLSizeMake(
      divRoundUp(width, threadsPerThreadgroup.width),
      divRoundUp(height, threadsPerThreadgroup.height),
      numberOfImages * divRoundUp(featureChannels, 4));
  const auto threadsPerGrid = MTLSizeMake(
      width, height, numberOfImages * divRoundUp(featureChannels, 4));
  return {threadsPerThreadgroup, threadgroupsPerGrid, threadsPerGrid};
}

} // namespace at::native::metal::mpscnn

```

## High-Level Overview

This file is part of the PyTorch repository. It is a source or configuration file.

## Detailed Walkthrough


## Key Components

The file contains 100 words across 35 lines of code/text.

## Usage & Examples

This file is part of the larger PyTorch codebase. For usage examples, refer to related test files and documentation.

## Performance & Security Notes

- File size: 1206 bytes
- Complexity: Standard

## Related Files

See the folder index for related files in the same directory.

## Testing

Refer to the PyTorch test suite for test coverage of this file.

---
*Generated by Repo Book Generator v1.0*
