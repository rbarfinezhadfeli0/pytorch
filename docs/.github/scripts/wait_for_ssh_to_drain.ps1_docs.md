# Documentation: wait_for_ssh_to_drain.ps1

## File Metadata
- **Path**: `.github/scripts/wait_for_ssh_to_drain.ps1`
- **Size**: 582 bytes
- **Lines**: 17
- **Extension**: .ps1
- **Type**: Regular file

## Original Source

```ps1
function Get-SSH-Users {
    # Gets ssh sessions for all users not named SYSTEM
    Get-CimInstance -ClassName Win32_Process -Filter "Name = 'sshd.exe'" |
        Get-CimAssociatedInstance -Association Win32_SessionProcess |
        Get-CimAssociatedInstance -Association Win32_LoggedOnUser |
        Where-Object {$_.Name -ne 'SYSTEM'} |
        Measure-Object
}

$usersLoggedOn = Get-SSH-Users

Write-Output "Holding runner until all ssh sessions have logged out"
while ($usersLoggedOn.Count -gt 0) {
    $usersLoggedOn = Get-SSH-Users
    Write-Output "."
    Start-Sleep -s 5
}

```

## High-Level Overview

This file is part of the PyTorch repository. It is a source or configuration file.

## Detailed Walkthrough


## Key Components

The file contains 63 words across 17 lines of code/text.

## Usage & Examples

This file is part of the larger PyTorch codebase. For usage examples, refer to related test files and documentation.

## Performance & Security Notes

- File size: 582 bytes
- Complexity: Standard

## Related Files

See the folder index for related files in the same directory.

## Testing

Refer to the PyTorch test suite for test coverage of this file.

---
*Generated by Repo Book Generator v1.0*
