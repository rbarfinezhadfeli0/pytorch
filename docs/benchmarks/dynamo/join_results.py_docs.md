# Documentation: join_results.py

## File Metadata
- **Path**: `benchmarks/dynamo/join_results.py`
- **Size**: 1570 bytes
- **Lines**: 57
- **Extension**: .py
- **Type**: Regular file

## Original Source

```py
"""
A tool to merge multiple csv files (generated by torchbench.py/etc) into a single csv file.
Performs an outer join based on the benchmark name, filling in any missing data with zeros.
"""

import argparse
import functools
import operator
from pathlib import Path

import pandas as pd


def longest_common_prefix(strs):
    shortest_str = min(strs, key=len)
    for i, char in enumerate(shortest_str):
        for other in strs:
            if other[i] != char:
                return shortest_str[:i]
    return ""


def main():
    parser = argparse.ArgumentParser()
    parser.add_argument("--field", "-f", default="speedup", type=str)
    parser.add_argument("--output", "-o", type=str)
    parser.add_argument("inputs", nargs="*")
    args = parser.parse_args()

    prefix = longest_common_prefix([Path(inp).stem for inp in args.inputs])
    frames = []
    fields = []
    for inp in args.inputs:
        field = Path(inp).stem[len(prefix) :]
        fields.append(field)
        frames.append(
            pd.read_csv(inp)
            .filter(["name", args.field])
            .rename(columns={args.field: field})
        )

    df = frames[0]
    for other in frames[1:]:
        df = df.merge(other, how="outer", on="name")
    df = df.fillna(0)

    # drop rows where all backends failed
    df = df[functools.reduce(operator.or_, [df[f] != 0 for f in fields])]

    prefix = prefix.strip("_") or "output"
    output = args.output or f"{prefix}.csv"
    print(f"Writing {output}")
    df.to_csv(output, index=False)


if __name__ == "__main__":
    main()

```

## High-Level Overview

This file is part of the PyTorch repository. It is a Python source file that may contain classes, functions, and module-level code.

## Detailed Walkthrough

### Functions
This file defines 2 function(s): longest_common_prefix, main


## Key Components

The file contains 167 words across 57 lines of code/text.

## Usage & Examples

This file is part of the larger PyTorch codebase. For usage examples, refer to related test files and documentation.

## Performance & Security Notes

- File size: 1570 bytes
- Complexity: Standard

## Related Files

See the folder index for related files in the same directory.

## Testing

Refer to the PyTorch test suite for test coverage of this file.

---
*Generated by Repo Book Generator v1.0*
