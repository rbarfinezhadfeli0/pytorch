# Documentation: utils.py

## File Metadata
- **Path**: `torch/distributed/checkpoint/_experimental/utils.py`
- **Size**: 1305 bytes
- **Lines**: 42
- **Extension**: .py
- **Type**: Regular file

## Original Source

```py
"""
Utility functions for the experimental checkpoint module.

This module contains helper functions and utilities used across the experimental
checkpoint functionality.
"""

from concurrent.futures import Future
from typing import Any


def wrap_future(original_result: Any) -> Future[None]:
    """
    Wraps a result (Future or not) to return a Future with None result.

    If the input is a Future, returns a new Future that completes with None when
    the original Future completes successfully, or propagates any exception.
    If the input is not a Future, returns a completed Future with None result.

    Args:
        original_result: The result to wrap (Future or any other value).

    Returns:
        A Future that completes with None on success or propagates exceptions.
    """
    masked_future: Future[None] = Future()

    if isinstance(original_result, Future):

        def on_complete(_: Future[Any]) -> None:
            try:
                original_result.result()
                masked_future.set_result(None)
            except Exception as e:
                masked_future.set_exception(e)

        original_result.add_done_callback(on_complete)
    else:
        # Return a completed future with None result
        masked_future.set_result(None)

    return masked_future

```

## High-Level Overview

This file is part of the PyTorch repository. It is a Python source file that may contain classes, functions, and module-level code.

## Detailed Walkthrough

### Functions
This file defines 2 function(s): wrap_future, on_complete


## Key Components

The file contains 144 words across 42 lines of code/text.

## Usage & Examples

This file is part of the larger PyTorch codebase. For usage examples, refer to related test files and documentation.

## Performance & Security Notes

- File size: 1305 bytes
- Complexity: Standard

## Related Files

See the folder index for related files in the same directory.

## Testing

Refer to the PyTorch test suite for test coverage of this file.

---
*Generated by Repo Book Generator v1.0*
